!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["react","prop-types"],e):(t=t||self).OnScrollTo=e(t.React,t.PropTypes)}(this,function(t,e){"use strict";function n(){return window.pageYOffset}function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(){if("undefined"!=typeof window&&window.OnScrollToDebug){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=console).log.apply(t,o(["[on-scroll-to]"].concat(n)))}}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){c(t,e,n[e])})}return t}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e;var l=function(){function t(e,n,o,s){var l=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,"onScroll",function(){return l.onCheckScrollStatus({reason:"scroll"})}),c(this,"onResize",function(){return l.onCheckScrollStatus({reason:"resize"})}),c(this,"onIntersectViewport",function(t,e){t[0].isIntersecting&&l.onScrollTo()}),c(this,"onResult",function(t){!0===t?l.enable():l.hide()}),c(this,"onError",function(t){console.error(t),l.setState({error:t})}),this.getElement=e,this._onScrollTo=n,this.onStateChange=o,this.options=i({},s),void 0===this.options.distance&&(this.options.distance="undefined"==typeof window?0:window.innerHeight),this.state={},r("~ Initialize ~"),r("Distance",this.options.distance)}var e,o,l;return e=t,(o=[{key:"onMount",value:function(){if(this.isMounted=!0,r("Mounted"),window.IntersectionObserver){var t=this.options.distance;this.intersectionObserver=new IntersectionObserver(this.onIntersectViewport,{root:null,rootMargin:"".concat(t,"px 0px ").concat(t,"px 0px"),threshold:0}),this.intersectionObserver.observe(this.getElement())}else window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResize),this.onCheckScrollStatus({reason:"mount"})}},{key:"onUnmount",value:function(){this.isMounted&&(this.isMounted=!1,r("Unmount"),this.intersectionObserver?this.intersectionObserver.disconnect():(window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResize)))}},{key:"onCheckScrollStatus",value:function(t){this.getState().loading||(r("Check scroll status (".concat(t,")")),this.isVisible()&&this.onScrollTo())}},{key:"isVisible",value:function(){var t,e=this.options.distance,o=this.getElementCoordinates(),r=o.top,i=o.bottom,s=(t=window.innerHeight,{top:n(),bottom:n()+t,height:t});return i>=s.top-e&&r<=s.bottom+e}},{key:"getElementCoordinates",value:function(){var t=this.getElement().getBoundingClientRect(),e=t.top;return{top:e,bottom:e+t.height}}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){r("Set state",t),this.state=i({},this.state,t),r("New state",this.state),this.onStateChange(this.state)}},{key:"onScrollTo",value:function(){r("On scroll to"),this.disable(),function(t,e,n){try{var o=t();o&&"function"==typeof o.then?o.then(e,n):e(o)}catch(t){n(t)}}(this._onScrollTo,this.onResult,this.onError)}},{key:"disable",value:function(){r("Disable while loading"),this.setState({loading:!0}),this.intersectionObserver&&this.intersectionObserver.disconnect()}},{key:"isEnabled",value:function(){var t=this.getState(),e=t.loading,n=t.error;return!e&&!n}},{key:"enable",value:function(){r("Enable"),this.setState({loading:void 0,error:void 0}),this.intersectionObserver?this.intersectionObserver.observe(this.getElement()):this.onCheckScrollStatus({reason:"re-enable"})}},{key:"retry",value:function(){if(!this.getState().error)throw new Error("[on-scroll-to] No error");r("Retry"),this.enable()}},{key:"hide",value:function(){r("Hide"),this.setState({hidden:!0}),this.onUnmount()}}])&&s(e.prototype,o),l&&s(e,l),t}();function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function f(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function h(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(e){function n(t){var e,o,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,r=p(n).call(this,t),e=!r||"object"!==u(r)&&"function"!=typeof r?d(o):r,b(d(e),"retry",function(){return e.onScrollTo.retry()}),b(d(e),"setDOMNode",function(t){return e.element=t});var i=e.props,s=i.onScrollTo,c=i.distance;return e.onScrollTo=new l(function(){return e.element},s,function(){return e.forceUpdate()},{distance:c}),e}var o,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(n,t.Component),o=n,(r=[{key:"componentDidMount",value:function(){this.onScrollTo.onMount()}},{key:"componentWillUnmount",value:function(){this.onScrollTo.onUnmount()}},{key:"render",value:function(){var e=this.props,n=e.component,o=(e.onScrollTo,e.distance,f(e,["component","onScrollTo","distance"])),r=this.onScrollTo.getState(),i=r.loading,s=r.hidden,c=r.error;return s?null:t.createElement(n,a({},o,{setDOMNode:this.setDOMNode,loading:i,retry:this.retry,error:c}))}}])&&h(o.prototype,r),i&&h(o,i),n}();return v.propTypes={distance:e.number,component:e.func.isRequired,onScrollTo:e.func.isRequired},v});
//# sourceMappingURL=on-scroll-to-react.js.map
